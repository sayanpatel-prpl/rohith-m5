---
phase: 06-competitive-landscape-and-sub-sector-analysis
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/sections/competitive/CompetitiveMoves.tsx
  - src/sections/competitive/ProductLaunches.tsx
  - src/sections/competitive/PricingActions.tsx
  - src/sections/competitive/D2CInitiatives.tsx
  - src/sections/competitive/QCPartnerships.tsx
  - src/sections/competitive/ClusterAnalysis.tsx
  - src/sections/competitive/CompetitiveSummaryStats.tsx
autonomous: true

must_haves:
  truths:
    - "User sees product launches with company, product name, category, positioning note, and date"
    - "User sees pricing actions with company, action type badge, category, magnitude, and context"
    - "User sees D2C initiatives with company, initiative description, channel, and status badge"
    - "User sees quick commerce partnerships with company, partner, scope, and status badge"
    - "User sees cluster analysis grouping companies by competitive strategy with outlook narrative"
    - "User sees summary stats row with total counts for each competitive move category"
    - "Radix Tabs allow filtering between All, Launches, Pricing, D2C, and Partnerships views"
  artifacts:
    - path: "src/sections/competitive/CompetitiveMoves.tsx"
      provides: "Main Competitive Moves section with Radix Tabs and summary stats"
      min_lines: 40
    - path: "src/sections/competitive/ProductLaunches.tsx"
      provides: "Product launch cards with category and positioning"
      min_lines: 20
    - path: "src/sections/competitive/PricingActions.tsx"
      provides: "Pricing action cards with action type badge and magnitude"
      min_lines: 25
    - path: "src/sections/competitive/D2CInitiatives.tsx"
      provides: "D2C initiative cards with status badge"
      min_lines: 20
    - path: "src/sections/competitive/QCPartnerships.tsx"
      provides: "Quick commerce partnership cards with status badge"
      min_lines: 20
    - path: "src/sections/competitive/ClusterAnalysis.tsx"
      provides: "Cluster analysis cards grouping companies by strategy"
      min_lines: 25
    - path: "src/sections/competitive/CompetitiveSummaryStats.tsx"
      provides: "Summary stats row with StatCards"
      min_lines: 15
  key_links:
    - from: "src/sections/competitive/CompetitiveMoves.tsx"
      to: "src/hooks/use-filtered-data.ts"
      via: "useFilteredData('competitive')"
      pattern: "useFilteredData.*competitive"
    - from: "src/sections/competitive/ClusterAnalysis.tsx"
      to: "src/components/ui/InsightCard.tsx"
      via: "InsightCard for cluster outlook"
      pattern: "InsightCard"
---

<objective>
Build the Competitive Moves section -- tracking product launches, pricing actions, D2C initiatives, and quick commerce partnerships across the Indian Consumer Durables sector, with AI cluster analysis grouping companies by competitive strategy.

Purpose: Users need to see strategic competitive moves to understand positioning shifts and identify BD opportunities around companies making aggressive or defensive plays.

Output: Fully rendered Competitive Moves section replacing the Phase 2 placeholder, with tabbed navigation across move types and cluster analysis visualization.
</objective>

<execution_context>
@/Users/prateekkurkanji/.claude/get-shit-done/workflows/execute-plan.md
@/Users/prateekkurkanji/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

@src/types/sections.ts
@src/data/mock/competitive.ts
@src/hooks/use-filtered-data.ts
@src/components/ui/StatCard.tsx
@src/components/ui/InsightCard.tsx
@src/components/ui/ConfidenceBadge.tsx
@src/lib/formatters.ts
@src/theme/tokens.css

Reference patterns from completed sections:
@src/sections/deals/DealsTransactions.tsx
@src/sections/deals/DealCard.tsx
@src/sections/deals/DealSummaryStats.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Build Competitive Moves section with tabbed sub-views and cluster analysis</name>
  <files>src/sections/competitive/CompetitiveMoves.tsx, src/sections/competitive/ProductLaunches.tsx, src/sections/competitive/PricingActions.tsx, src/sections/competitive/D2CInitiatives.tsx, src/sections/competitive/QCPartnerships.tsx, src/sections/competitive/ClusterAnalysis.tsx, src/sections/competitive/CompetitiveSummaryStats.tsx</files>
  <action>
Replace the Phase 2 placeholder in `CompetitiveMoves.tsx` with a full Competitive Moves section. Create sub-components for each competitive move type. The main component must retain `export default function CompetitiveMoves()` (React.lazy requires default export).

**CompetitiveMoves.tsx** (main orchestrator):
- Keep `useFilteredData<CompetitiveMovesData>("competitive")`, loading/error/null handling, and header with `DataRecencyTag`.
- Remove all placeholder content and the `getActiveFilterSummary` helper.
- Layout:
  ```
  <div className="p-md space-y-md">
    {/* Header row with title + DataRecencyTag */}
    <CompetitiveSummaryStats data={data} />
    {/* Radix Tabs for move type filtering */}
    <Tabs.Root defaultValue="all">
      <Tabs.List className="flex gap-xs border-b border-surface-overlay mb-md">
        <TabTrigger value="all" label="All Moves" />
        <TabTrigger value="launches" label="Launches" count={data.productLaunches.length} />
        <TabTrigger value="pricing" label="Pricing" count={data.pricingActions.length} />
        <TabTrigger value="d2c" label="D2C" count={data.d2cInitiatives.length} />
        <TabTrigger value="partnerships" label="Partnerships" count={data.qcPartnerships.length} />
      </Tabs.List>
      <Tabs.Content value="all">
        {/* Show all sub-sections */}
        <div className="space-y-md">
          <ProductLaunches launches={data.productLaunches} />
          <PricingActions actions={data.pricingActions} />
          <D2CInitiatives initiatives={data.d2cInitiatives} />
          <QCPartnerships partnerships={data.qcPartnerships} />
        </div>
      </Tabs.Content>
      <Tabs.Content value="launches"><ProductLaunches launches={data.productLaunches} /></Tabs.Content>
      <Tabs.Content value="pricing"><PricingActions actions={data.pricingActions} /></Tabs.Content>
      <Tabs.Content value="d2c"><D2CInitiatives initiatives={data.d2cInitiatives} /></Tabs.Content>
      <Tabs.Content value="partnerships"><QCPartnerships partnerships={data.qcPartnerships} /></Tabs.Content>
    </Tabs.Root>
    {/* Cluster Analysis always visible below tabs */}
    <ClusterAnalysis clusters={data.clusterAnalysis} />
  </div>
  ```
- Import Radix Tabs: `import { Tabs } from "radix-ui"`
- TabTrigger helper: inline styled trigger with `text-xs px-sm py-xs font-medium`, active state uses `data-[state=active]:text-brand-primary data-[state=active]:border-b-2 data-[state=active]:border-brand-primary`. Include count badge if provided.

**CompetitiveSummaryStats.tsx**:
- Props: `{ data: CompetitiveMovesData }`
- Render 4 StatCards in a `grid grid-cols-4 gap-md`:
  - Product Launches (count, label)
  - Pricing Actions (count, label)
  - D2C Initiatives (count, label)
  - QC Partnerships (count, label)

**ProductLaunches.tsx**:
- Props: `{ launches: CompetitiveMovesData['productLaunches'] }`
- Section heading: "Product Launches & New SKUs" in `text-xs font-medium text-text-secondary uppercase tracking-wide`.
- Render cards in a `grid grid-cols-2 gap-sm` layout.
- Each card: `bg-surface-raised border border-surface-overlay rounded p-sm`
  - Company name in bold + category badge (use config-record pattern: `bg-chart-1/10 text-chart-1 border-chart-1/20 text-xs px-1.5 py-0.5 rounded`)
  - Product name in `text-xs text-text-primary font-medium`
  - Positioning note in `text-xs text-text-secondary`
  - Date formatted with `formatDate` from formatters.ts
- Empty state message if no launches.

**PricingActions.tsx**:
- Props: `{ actions: CompetitiveMovesData['pricingActions'] }`
- Section heading: "Pricing Actions"
- Cards in `grid grid-cols-2 gap-sm`.
- Each card:
  - Company name + action type badge (config-record: increase = `bg-negative/10 text-negative`, decrease = `bg-positive/10 text-positive`, promotional = `bg-brand-accent/10 text-brand-accent`)
  - Category in `text-xs text-text-secondary`
  - Magnitude: if non-null, format as percentage with sign (e.g., "+3.5%"); if null, show "N/A"
  - Context paragraph in `text-xs text-text-secondary`

**D2CInitiatives.tsx**:
- Props: `{ initiatives: CompetitiveMovesData['d2cInitiatives'] }`
- Section heading: "D2C Initiatives"
- Cards in `grid grid-cols-1 gap-sm` (wider cards for more detail).
- Each card:
  - Company name + status badge (config-record: launched = `bg-positive/10 text-positive`, piloting = `bg-brand-accent/10 text-brand-accent`, announced = `bg-neutral/10 text-neutral`)
  - Channel tag in `text-xs text-text-muted`
  - Initiative name in `text-xs text-text-primary font-medium`
  - Details in `text-xs text-text-secondary`

**QCPartnerships.tsx**:
- Props: `{ partnerships: CompetitiveMovesData['qcPartnerships'] }`
- Section heading: "Quick Commerce Partnerships"
- Cards in `grid grid-cols-2 gap-sm`.
- Each card:
  - Company name + partner name (e.g., "Havells x Blinkit")
  - Status badge (same config as D2C: active/announced/rumored)
  - Scope description in `text-xs text-text-secondary`

**ClusterAnalysis.tsx**:
- Props: `{ clusters: CompetitiveMovesData['clusterAnalysis'] }`
- Section heading: "AI Competitive Strategy Clusters"
- Render each cluster as an `InsightCard` with:
  - `title={cluster.cluster}` (e.g., "Premium Innovators")
  - `explanation={cluster.outlook}`
  - `confidence="high"` for all clusters (AI-generated)
  - `variant` mapped: "Premium Innovators" = "opportunity", "Scale Manufacturers" = "pattern", "Turnaround Candidates" = "risk"
- Below each InsightCard, render company list as compact pills/chips: `inline-flex gap-1`, each company as `text-xs bg-surface-overlay px-1.5 py-0.5 rounded`
- Include the characteristics text in `text-xs text-text-secondary` between title and companies.

**Important constraints:**
- The mock data in `competitive.ts` uses display names (e.g., "Voltas", "Havells") not company IDs. This is correct because competitive moves are sector-wide observations (like Market Pulse), not company-filterable data. Do NOT change company fields to IDs.
- Import Radix components: `import { Tabs } from "radix-ui"`
- Use `formatDate` from `src/lib/formatters.ts` for date formatting.
- Follow the badge config-record pattern established in PerformanceTag, ConfidenceBadge, DealTypeBadge.
  </action>
  <verify>
Run `npx tsc --noEmit` -- zero TypeScript errors. Verify:
1. CompetitiveMoves renders with tabbed navigation (All, Launches, Pricing, D2C, Partnerships).
2. Summary stats row shows 4 StatCards with counts.
3. Each tab shows only the relevant competitive move type.
4. Cluster analysis shows InsightCards with company pills.
5. All badges use config-record pattern with correct color coding.
  </verify>
  <done>Competitive Moves section displays all competitive move categories with tabbed navigation, summary stats, and AI cluster analysis. Requirements COMP-01, COMP-02, COMP-03, COMP-04 satisfied.</done>
</task>

</tasks>

<verification>
- `npx tsc --noEmit` passes with zero errors
- Competitive Moves section renders with Radix Tabs navigation
- Product launches show with category badges and formatted dates (COMP-01)
- Pricing actions show with action type badges and magnitude (COMP-02)
- D2C initiatives and QC partnerships show with status badges (COMP-03)
- Cluster analysis groups companies by strategy with InsightCards (COMP-04)
- Summary stats row shows correct counts per category
</verification>

<success_criteria>
Competitive Moves section renders with tabbed navigation across 5 competitive move categories, summary stats, and AI cluster analysis. Each move type has appropriate badges and formatting. Requirements COMP-01 through COMP-04 are complete.
</success_criteria>

<output>
After completion, create `.planning/phases/06-competitive-landscape-and-sub-sector-analysis/06-01-SUMMARY.md`
</output>
