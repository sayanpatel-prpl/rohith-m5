---
phase: 01-foundation-infrastructure
plan: 05
type: execute
wave: 1
depends_on: []
files_modified:
  - dashboard_build_v2/src/types/common.ts
  - dashboard_build_v2/src/types/filters.ts
  - dashboard_build_v2/src/types/source.ts
  - dashboard_build_v2/src/types/news.ts
  - dashboard_build_v2/src/types/company.ts
  - dashboard_build_v2/src/types/am-theme.ts
  - dashboard_build_v2/src/types/sections.ts
  - dashboard_build_v2/src/theme/tokens.css
  - dashboard_build_v2/src/theme/dark-mode.ts
autonomous: true

must_haves:
  truths:
    - "All TypeScript types are defined: SourceInfo, NewsItem, AMServiceLine, AMActionType, FilterState, SectionId, Company"
    - "Theme tokens include dark mode variants, A&M action-type colors, tenant overrides, and chart palette"
    - "dark-mode.ts provides initTheme, applyTheme, and getStoredTheme without flash of unstyled content"
  artifacts:
    - path: "dashboard_build_v2/src/types/source.ts"
      provides: "SourceInfo, SourceTier, SourceConfidence types"
      exports: ["SourceInfo", "SourceTier", "SourceConfidence"]
    - path: "dashboard_build_v2/src/types/news.ts"
      provides: "NewsItem interface with credibility fields"
      exports: ["NewsItem"]
    - path: "dashboard_build_v2/src/types/am-theme.ts"
      provides: "AMServiceLine and AMActionType types"
      exports: ["AMServiceLine", "AMActionType"]
    - path: "dashboard_build_v2/src/theme/tokens.css"
      provides: "All CSS design tokens including A&M colors"
      contains: "am-turnaround"
    - path: "dashboard_build_v2/src/types/company.ts"
      provides: "Company interface and COMPANY_IDS const"
      exports: ["Company", "COMPANY_IDS", "CompanyId"]
    - path: "dashboard_build_v2/src/types/filters.ts"
      provides: "FilterState, FilterActions, DEFAULT_FILTERS"
      exports: ["FilterState", "FilterActions", "DEFAULT_FILTERS"]
  key_links:
    - from: "dashboard_build_v2/src/types/news.ts"
      to: "dashboard_build_v2/src/types/source.ts"
      via: "SourceTier import"
      pattern: "import.*SourceTier"
    - from: "dashboard_build_v2/src/types/news.ts"
      to: "dashboard_build_v2/src/types/common.ts"
      via: "SectionId import"
      pattern: "import.*SectionId"
---

<objective>
Create all TypeScript type definitions and theme tokens for the dashboard.

Purpose: Types define the data contracts that every component, loader, and hook depends on. Theme tokens define all visual design primitives. Both are foundational and have no dependencies on project scaffold (they are pure .ts and .css files).
Output: 7 type definition files and 2 theme files, all self-contained.
</objective>

<execution_context>
@C:/Users/rohit/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/rohit/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation-infrastructure/01-RESEARCH.md

# V1 reference files to carry forward patterns from
@src/theme/tokens.css
@src/theme/dark-mode.ts
@src/types/filters.ts
@src/types/common.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create TypeScript type definitions</name>
  <files>
    dashboard_build_v2/src/types/common.ts
    dashboard_build_v2/src/types/filters.ts
    dashboard_build_v2/src/types/source.ts
    dashboard_build_v2/src/types/news.ts
    dashboard_build_v2/src/types/company.ts
    dashboard_build_v2/src/types/am-theme.ts
    dashboard_build_v2/src/types/sections.ts
  </files>
  <action>
    **src/types/common.ts:** Export SectionId type as union of 11 section path strings: 'executive' | 'am-value-add' | 'market-pulse' | 'financial' | 'deals' | 'operations' | 'leadership' | 'competitive' | 'deep-dive' | 'what-this-means' | 'watchlist'. Export ConfidenceLevel = 'verified' | 'derived' | 'estimated'.

    **src/types/filters.ts:** Port verbatim from v1 (src/types/filters.ts). FilterState with companies: string[], subCategory: string, performanceTier: string, timePeriod: string. DEFAULT_FILTERS and FilterActions interfaces unchanged.

    **src/types/source.ts (SRCA-01):** Export SourceTier = 1 | 2 | 3 | 4. Export SourceConfidence = 'verified' | 'derived' | 'estimated'. Export SourceInfo interface with: source: string, confidence: SourceConfidence, tier: SourceTier, lastUpdated: string, url?: string.

    **src/types/news.ts (NEWS-01):** Export NewsItem interface with: id: string, headline: string, body: string, source: string, date: string, companyIds: string[], sectionIds: SectionId[], sourceTier: SourceTier, sourceCredibility: 'high' | 'medium' | 'low', corroboratedBy?: string[], contradictedBy?: string[], isVerifiedByFiling?: boolean.

    **src/types/company.ts:** Export Company interface with: id: string, name: string, ticker: string, nseSymbol?: string, subSector: string (e.g., 'AC', 'Kitchen', 'Electrical', 'EMS', 'Mixed', 'Cooler'). Export COMPANY_IDS as const array of 16 company ID strings. Export CompanyId type from the const array. Export getCompanyDisplayName helper.

    **src/types/am-theme.ts (AMTH-02):** Export AMServiceLine = 'CPI' | 'Restructuring' | 'Transaction Advisory' | 'PE Services' | 'Digital' | 'Operations'. Export AMActionType = 'turnaround' | 'improvement' | 'transaction' | 'neutral'. Export AM_SERVICE_LINE_LABELS record mapping each service line to its display label. Export AM_ACTION_COLORS record mapping each action type to its CSS variable name (e.g., 'turnaround' -> 'var(--color-am-turnaround)').

    **src/types/sections.ts:** Export base SectionData interface with: section: SectionId, dataAsOf?: string, lastUpdated?: string. Export SectionMeta interface with: label: string, description: string, icon?: string. This will be extended by individual section data types in later phases.
  </action>
  <verify>
    Run `cd dashboard_build_v2 && npx tsc --noEmit` â€” types directory should compile (types are self-contained with no external deps beyond each other).
    Verify SectionId has exactly 11 members.
    Verify COMPANY_IDS has 16 entries.
    Verify NewsItem imports SectionId and SourceTier correctly.
  </verify>
  <done>
    All 7 type definition files exist with correct interfaces, union types, and const arrays. Cross-references between type files compile without errors.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create theme tokens and dark mode utilities</name>
  <files>
    dashboard_build_v2/src/theme/tokens.css
    dashboard_build_v2/src/theme/dark-mode.ts
  </files>
  <action>
    **src/theme/tokens.css (FOUND-03, AMTH-01):** Start with `@import "tailwindcss"`. Use @theme directive for all tokens. Copy v1's tokens.css entirely, then ADD:
    - A&M action-type colors: --color-am-turnaround (oklch red), --color-am-improvement (oklch amber), --color-am-transaction (oklch green), --color-am-neutral (oklch slate). Use oklch values from research.
    - Source tier badge colors: --color-tier-1 (green), --color-tier-2 (blue), --color-tier-3 (amber), --color-tier-4 (red).
    - Dark mode overrides for ALL new tokens in .dark block.
    - Tenant overrides for kompete, bcg, am (carry from v1).
    - Print styles (carry from v1).
    - Keep fade-in and accordion keyframes from v1.

    **src/theme/dark-mode.ts:** Port verbatim from v1 (src/theme/dark-mode.ts). ThemePreference type, getStoredTheme, applyTheme, initTheme functions unchanged.
  </action>
  <verify>
    Verify tokens.css contains @import "tailwindcss" and @theme directive.
    Verify tokens.css contains --color-am-turnaround, --color-tier-1, and .dark overrides.
    Verify dark-mode.ts exports initTheme function.
  </verify>
  <done>
    Theme tokens.css includes all design primitives: base colors, A&M action-type colors, source tier badge colors, dark mode overrides, tenant overrides, and animation keyframes. dark-mode.ts provides FOUC-free theme initialization.
  </done>
</task>

</tasks>

<verification>
1. All type files export their declared types without circular dependencies
2. SectionId has 11 members, COMPANY_IDS has 16 entries
3. tokens.css contains A&M action-type colors and dark mode variants
4. tokens.css contains source tier badge colors (--color-tier-1 through --color-tier-4)
5. dark-mode.ts exports initTheme, applyTheme, getStoredTheme
</verification>

<success_criteria>
- All 7 type definition files exist with correct interfaces
- Theme tokens include A&M colors (turnaround/improvement/transaction/neutral) with dark variants
- Theme tokens include source tier badge colors (T1 green, T2 blue, T3 amber, T4 red)
- dark-mode.ts provides FOUC-free theme toggle
- No circular dependencies between type files
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-infrastructure/01-05-SUMMARY.md`
</output>
